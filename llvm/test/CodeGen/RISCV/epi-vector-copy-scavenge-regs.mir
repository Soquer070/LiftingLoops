# RUN: llc -o - -mtriple=riscv64-unknown-linux-gnu -mattr=+v \
# RUN:     -verify-machineinstrs %s | FileCheck %s
---
name:            test
tracksRegLiveness: true
body: |
  bb.0.entry:
    liveins: $v2, $x10
    $v1 = COPY $v2
    $v3 = COPY $v2
    $v4 = COPY $v3
    $v5 = COPY $v4
    $v6 = COPY $v5
    VSE_V $v6, $x10, $noreg, implicit $vl, implicit $vtype
...

# CHECK:	rdvtype t0
# CHECK-NEXT:	rdvl t1
# CHECK-NEXT:	vsetvli	zero, zero, e64,m1
# CHECK-NEXT:	vmv.v.v	v3, v2
# CHECK-NEXT:	vsetvl	zero, t1, t0
# CHECK-NEXT:	rdvtype t0
# CHECK-NEXT:	rdvl t1
# CHECK-NEXT:	vsetvli	zero, zero, e64,m1
# CHECK-NEXT:	vmv.v.v	v4, v3
# CHECK-NEXT:	vsetvl	zero, t1, t0
# CHECK-NEXT:	rdvtype t0
# CHECK-NEXT:	rdvl t1
# CHECK-NEXT:	vsetvli	zero, zero, e64,m1
# CHECK-NEXT:	vmv.v.v	v5, v4
# CHECK-NEXT:	vsetvl	zero, t1, t0
# CHECK-NEXT:	rdvtype t0
# CHECK-NEXT:	rdvl t1
# CHECK-NEXT:	vsetvli	zero, zero, e64,m1
# CHECK-NEXT:	vmv.v.v	v6, v5
# CHECK-NEXT:	vsetvl	zero, t1, t0
# CHECK-NEXT:	vse.v	v6, (a0)
